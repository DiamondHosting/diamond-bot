# ğŸ¤– Diamond Bot - é‘½çŸ³æ©Ÿå™¨äºº v2.0

ä¸€å€‹åŠŸèƒ½è±å¯Œçš„ Discord æ©Ÿå™¨äººï¼Œæä¾›æŠ•ç¥¨ã€æŠ½çã€èªéŸ³åŠŸèƒ½ç­‰å¤šç¨®æœå‹™ã€‚

## âœ¨ åŠŸèƒ½ç‰¹è‰²

- ğŸ—³ï¸ **æŠ•ç¥¨ç³»çµ±** - å»ºç«‹å¤šé¸æŠ•ç¥¨ï¼Œæ”¯æ´æ™‚é–“é™åˆ¶å’Œæ¬Šé™æ§åˆ¶
- ğŸ‰ **æŠ½çç³»çµ±** - èˆ‰è¾¦æŠ½çæ´»å‹•ï¼Œè‡ªå‹•é¸å‡ºå¾—çè€…
- ğŸµ **éŸ³æ¨‚æ’­æ”¾** - æ’­æ”¾ YouTube éŸ³æ¨‚å’Œæ’­æ”¾æ¸…å–®
- ğŸ”Š **èªéŸ³ç®¡ç†** - è‡¨æ™‚èªéŸ³é »é“ç®¡ç†
- ğŸ“Š **è³‡æ–™çµ±è¨ˆ** - è©³ç´°çš„ä½¿ç”¨çµ±è¨ˆå’Œåˆ†æ
- ğŸ›¡ï¸ **æ¬Šé™æ§åˆ¶** - ç´°ç·»çš„æ¬Šé™ç®¡ç†ç³»çµ±

## ğŸš€ å¿«é€Ÿé–‹å§‹

### ç’°å¢ƒéœ€æ±‚

- Node.js >= 20.0.0
- npm æˆ– yarn
- Discord Bot Token

### å®‰è£æ­¥é©Ÿ

1. **å…‹éš†å°ˆæ¡ˆ**
```bash
git clone <repository-url>
cd diamond-bot
```

2. **å®‰è£ä¾è³´**
```bash
npm install
```

3. **è¨­å®šç’°å¢ƒè®Šæ•¸**
```bash
cp .env.example .env
```
ç·¨è¼¯ `.env` æª”æ¡ˆï¼Œå¡«å…¥ä½ çš„ Discord Bot è³‡è¨Šï¼š
```env
TOKEN=your_discord_bot_token
CLIENT_ID=your_bot_client_id
GUILD_ID=your_server_id
```

4. **éƒ¨ç½²æŒ‡ä»¤**
```bash
npm run deploy
```

5. **å•Ÿå‹•æ©Ÿå™¨äºº**
```bash
npm start
```

### é–‹ç™¼æ¨¡å¼

```bash
npm run dev
```

## ï¿½ï¸ æŠ€è¡“æ£§

- **Runtime**: Node.js 20+ with ES Modules
- **Framework**: Discord.js v14.16.3
- **Database**: better-sqlite3 v11.5.0
- **Language**: JavaScript/TypeScript
- **Package Manager**: npm
- **Development**: nodemon for hot reload

## ï¿½ğŸ“‹ å¯ç”¨æŒ‡ä»¤

### æŠ•ç¥¨ç›¸é—œ
- `/æŠ•ç¥¨ ç™¼èµ·` - å»ºç«‹æ–°æŠ•ç¥¨
- `/æŠ•ç¥¨åˆ—è¡¨` - æŸ¥çœ‹é€²è¡Œä¸­çš„æŠ•ç¥¨

### æŠ½çç›¸é—œ
- `/æŠ½ç ç™¼èµ·` - å»ºç«‹æ–°æŠ½çæ´»å‹•

### èªéŸ³ç›¸é—œ
- `/tempvoice` - ç®¡ç†è‡¨æ™‚èªéŸ³é »é“
- `/voice` - èªéŸ³åŠŸèƒ½æ§åˆ¶

## ğŸ—ï¸ å°ˆæ¡ˆçµæ§‹

```
diamond-bot/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ commands/          # æŒ‡ä»¤æª”æ¡ˆ
â”‚   â”‚   â”œâ”€â”€ giveaway/     # æŠ½çç›¸é—œæŒ‡ä»¤
â”‚   â”‚   â”œâ”€â”€ poll/         # æŠ•ç¥¨ç›¸é—œæŒ‡ä»¤
â”‚   â”‚   â”œâ”€â”€ tempvoice/    # è‡¨æ™‚èªéŸ³æŒ‡ä»¤
â”‚   â”‚   â””â”€â”€ voice/        # èªéŸ³æŒ‡ä»¤
â”‚   â”œâ”€â”€ events/           # äº‹ä»¶è™•ç†å™¨
â”‚   â”œâ”€â”€ models/           # è³‡æ–™æ¨¡å‹
â”‚   â”œâ”€â”€ utils/            # å·¥å…·å‡½æ•¸
â”‚   â”œâ”€â”€ index.js          # ä¸»ç¨‹å¼
â”‚   â”œâ”€â”€ deploy-commands.js # æŒ‡ä»¤éƒ¨ç½²
â”‚   â””â”€â”€ delete-commands.js # æŒ‡ä»¤åˆªé™¤
â”œâ”€â”€ data/                 # è³‡æ–™æª”æ¡ˆ
â”‚   â”œâ”€â”€ database/         # SQLite è³‡æ–™åº«
â”‚   â””â”€â”€ backups/          # è³‡æ–™åº«å‚™ä»½
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ .env.example
â””â”€â”€ README.md
```

## ğŸ”§ é…ç½®é¸é …

### ç’°å¢ƒè®Šæ•¸

| è®Šæ•¸å | æè¿° | é è¨­å€¼ |
|--------|------|--------|
| `TOKEN` | Discord Bot Token | å¿…å¡« |
| `CLIENT_ID` | Discord æ‡‰ç”¨ç¨‹å¼ ID | å¿…å¡« |
| `GUILD_ID` | Discord ä¼ºæœå™¨ ID | é¸å¡« |
| `NODE_ENV` | åŸ·è¡Œç’°å¢ƒ | `production` |
| `DB_BACKUP_INTERVAL` | å‚™ä»½é–“éš”ï¼ˆå°æ™‚ï¼‰ | `6` |
| `MAX_BACKUP_COUNT` | æœ€å¤§å‚™ä»½æ•¸é‡ | `7` |

### åŠŸèƒ½é–‹é—œ

å¯åœ¨ `.env` æª”æ¡ˆä¸­æ§åˆ¶åŠŸèƒ½çš„é–‹å•Ÿèˆ‡é—œé–‰ï¼š

```env
ENABLE_VOICE=true
ENABLE_GIVEAWAYS=true
ENABLE_POLLS=true
ENABLE_MUSIC=true
```

## ğŸ“š API æ–‡ä»¶

### è³‡æ–™åº«æ¨¡å‹

#### Poll æ¨¡å‹
```javascript
{
  id: String,           // æŠ•ç¥¨ ID
  question: String,     // æŠ•ç¥¨å•é¡Œ
  options: Array,       // é¸é …åˆ—è¡¨
  votes: Object,        // æŠ•ç¥¨è¨˜éŒ„
  end_time: Number,     // çµæŸæ™‚é–“
  is_ended: Boolean,    // æ˜¯å¦å·²çµæŸ
  max_choices: Number,  // æœ€å¤§é¸æ“‡æ•¸
  restrict_role: String // é™åˆ¶èº«åˆ†çµ„
}
```

#### Giveaway æ¨¡å‹
```javascript
{
  id: String,           // æŠ½ç ID
  prize: String,        // çå“
  winners_count: Number,// å¾—çäººæ•¸
  participants: Array,  // åƒèˆ‡è€…åˆ—è¡¨
  end_time: Number,     // çµæŸæ™‚é–“
  is_ended: Boolean,    // æ˜¯å¦å·²çµæŸ
  role_requirement: String // èº«åˆ†çµ„è¦æ±‚
}
```

## ğŸ› ï¸ é–‹ç™¼æŒ‡å—

### æ–°å¢æŒ‡ä»¤

1. åœ¨å°æ‡‰çš„ `commands/` å­è³‡æ–™å¤¾ä¸­å»ºç«‹æ–°æª”æ¡ˆ
2. ä½¿ç”¨ä»¥ä¸‹ç¯„æœ¬ï¼š

```javascript
const { SlashCommandBuilder } = require('discord.js');

module.exports = {
    data: new SlashCommandBuilder()
        .setName('æŒ‡ä»¤åç¨±')
        .setDescription('æŒ‡ä»¤æè¿°'),
    
    async execute(interaction) {
        // æŒ‡ä»¤é‚è¼¯
        await interaction.reply('å›æ‡‰å…§å®¹');
    }
};
```

3. é‡æ–°éƒ¨ç½²æŒ‡ä»¤ï¼š`npm run deploy`

### æ–°å¢äº‹ä»¶è™•ç†å™¨

1. åœ¨ `events/` è³‡æ–™å¤¾ä¸­å»ºç«‹æ–°æª”æ¡ˆ
2. ä½¿ç”¨ä»¥ä¸‹ç¯„æœ¬ï¼š

```javascript
module.exports = {
    name: 'äº‹ä»¶åç¨±',
    once: false, // æ˜¯å¦åªåŸ·è¡Œä¸€æ¬¡
    async execute(...args) {
        // äº‹ä»¶è™•ç†é‚è¼¯
    }
};
```

### è³‡æ–™åº«æ“ä½œ

ä½¿ç”¨ better-sqlite3 é€²è¡Œè³‡æ–™åº«æ“ä½œï¼š

```javascript
const { db } = require('../utils/database');

// æŸ¥è©¢
const result = db.prepare('SELECT * FROM polls WHERE id = ?').get(pollId);

// æ’å…¥
db.prepare('INSERT INTO polls (...) VALUES (...)').run(...values);

// æ›´æ–°
db.prepare('UPDATE polls SET ... WHERE id = ?').run(...values, pollId);

// åˆªé™¤
db.prepare('DELETE FROM polls WHERE id = ?').run(pollId);
```

## ğŸ”’ å®‰å…¨æ€§

- ä½¿ç”¨ç’°å¢ƒè®Šæ•¸å„²å­˜æ•æ„Ÿè³‡è¨Š
- å¯¦æ–½æŒ‡ä»¤å†·å»æ™‚é–“
- æ¬Šé™é©—è­‰æ©Ÿåˆ¶
- è¼¸å…¥é©—è­‰å’Œæ¸…ç†
- å®šæœŸè³‡æ–™åº«å‚™ä»½

## ğŸ“Š ç›£æ§èˆ‡æ—¥èªŒ

- è‡ªå‹•éŒ¯èª¤æ•ç²å’Œè¨˜éŒ„
- æ•ˆèƒ½ç›£æ§
- ä½¿ç”¨çµ±è¨ˆ
- è³‡æ–™åº«å‚™ä»½ç‹€æ…‹

## ğŸ¤ è²¢ç»

æ­¡è¿æäº¤ Issues å’Œ Pull Requestsï¼

### é–‹ç™¼æµç¨‹

1. Fork æ­¤å°ˆæ¡ˆ
2. å»ºç«‹åŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/æ–°åŠŸèƒ½`)
3. æäº¤è®Šæ›´ (`git commit -am 'æ–°å¢æ–°åŠŸèƒ½'`)
4. æ¨é€åˆ†æ”¯ (`git push origin feature/æ–°åŠŸèƒ½`)
5. å»ºç«‹ Pull Request

## ğŸ“„ æˆæ¬Š

æ­¤å°ˆæ¡ˆæ¡ç”¨ MIT æˆæ¬Šæ¢æ¬¾ - è©³è¦‹ [LICENSE](LICENSE) æª”æ¡ˆ

## ğŸ†˜ æ”¯æ´

å¦‚æœé‡åˆ°å•é¡Œï¼Œè«‹ï¼š

1. æŸ¥çœ‹ [å¸¸è¦‹å•é¡Œ](#å¸¸è¦‹å•é¡Œ)
2. æœå°‹ [Issues](../../issues)
3. å»ºç«‹æ–°çš„ Issue

## ğŸ“ æ›´æ–°æ—¥èªŒ

### v1.0.0 (2025-01-03)
- ğŸ‰ åˆå§‹ç‰ˆæœ¬ç™¼å¸ƒ
- âœ¨ æ–°å¢æŠ•ç¥¨ç³»çµ±
- âœ¨ æ–°å¢æŠ½çç³»çµ±
- âœ¨ æ–°å¢èªéŸ³ç®¡ç†åŠŸèƒ½
- ğŸ›¡ï¸ æ–°å¢æ¬Šé™æ§åˆ¶ç³»çµ±
- ğŸ“Š æ–°å¢è³‡æ–™åº«å‚™ä»½æ©Ÿåˆ¶

## ğŸ”„ å‡ç´šåˆ° v2.0

æ­¤ç‰ˆæœ¬åŒ…å«é‡å¤§æ¶æ§‹å‡ç´šï¼š

- âœ… **ES Modules**: å®Œå…¨è½‰æ›ç‚ºç¾ä»£ ES Modules èªæ³•
- âœ… **Node.js 20+**: å‡ç´šæœ€ä½ç‰ˆæœ¬è¦æ±‚ä»¥åˆ©ç”¨æœ€æ–°åŠŸèƒ½
- âœ… **TypeScript æ”¯æ´**: æ–°å¢å®Œæ•´çš„ TypeScript é–‹ç™¼æ”¯æ´
- âœ… **å¥—ä»¶æ›´æ–°**: æ‰€æœ‰ä¾è³´å¥—ä»¶å‡ç´šåˆ°æœ€æ–°ç©©å®šç‰ˆæœ¬
- âœ… **å®‰å…¨æ€§ä¿®å¾©**: ä¿®å¾©å·²çŸ¥çš„å®‰å…¨æ€§å•é¡Œ

è©³ç´°å‡ç´šæŒ‡å—è«‹åƒè€ƒ [UPGRADE.md](./UPGRADE.md)

## â“ å¸¸è¦‹å•é¡Œ

### Q: æ©Ÿå™¨äººç„¡æ³•å›æ‡‰æŒ‡ä»¤ï¼Ÿ
A: è«‹ç¢ºèªï¼š
1. Bot Token æ˜¯å¦æ­£ç¢º
2. æ©Ÿå™¨äººæ˜¯å¦æœ‰è¶³å¤ çš„æ¬Šé™
3. æŒ‡ä»¤æ˜¯å¦å·²æ­£ç¢ºéƒ¨ç½²

### Q: è³‡æ–™åº«éŒ¯èª¤ï¼Ÿ
A: è«‹æª¢æŸ¥ï¼š
1. è³‡æ–™åº«æª”æ¡ˆæ¬Šé™
2. ç£ç¢Ÿç©ºé–“æ˜¯å¦è¶³å¤ 
3. æŸ¥çœ‹éŒ¯èª¤æ—¥èªŒ

### Q: å¦‚ä½•æ›´æ–°æ©Ÿå™¨äººï¼Ÿ
A: 
1. å‚™ä»½ç¾æœ‰è³‡æ–™
2. æ‹‰å–æœ€æ–°ç¨‹å¼ç¢¼
3. åŸ·è¡Œ `npm install`
4. é‡æ–°éƒ¨ç½²æŒ‡ä»¤
5. é‡å•Ÿæ©Ÿå™¨äºº

---

Made with â¤ï¸ by Diamond Team
